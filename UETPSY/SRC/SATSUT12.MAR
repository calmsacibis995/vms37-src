	.TITLE SATSUT12  UTILITY TO TELL SYSTST WHEN TO ABORT
	.IDENT 'V03-000'

;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************
;

;++
; FACILITY:
; 	THIS MODULE WILL BE DISTRIBUTED WITH VAX/VMS UNDER THE UETP UIC.
;
; ABSTRACT:
;	THIS MODULE WILL TRANSLATE A GROUP WIDE LOGICAL NAME
;	SYSTST$ABORT TO SEE IF USER OR UETP HAS SET IT TO 'YES'
;	TO REQUEST A PREMATURE ABORT OF THE SYSTEM SERVICE TESTS
;	BUT WITH ALL TEST RESULTS AND SUMMARY INFORMATION INTACT.
;	THIS USUALLY HAPPENS WHEN THE USER OF THE UETP HAS
;	ENTERED CONTROL-C TO THE NATIVE MODE PORTION OF THE
;	UETP TEST.
;	THIS ALSO CAN BY USED BY THOSE WHO SUBMIT THE SYSTEM SERVICE
;	TESTS AND WANT TO ABORT IT AFTER THE BATCH STREAM HAS
;	STARTED IT. THE USER TYPES --
;		$DEF/GR SYSTST$ABORT YES
;
;
; ENVIRONMENT:
; 	THE MODULE WILL RUN IN USER ACCESS MODE, WITH INTERRUPTS ENABLED
;
; AUTHOR: DICK BATOR,	CREATION DATE: 31-JAN-78
;
; MODIFIED BY:
;		T. CAFARELLA (1-FEB-78) TO CHANGE TRNBUFF TO A
;				STRING DESCRIPTOR.
;
;	, : VERSION
;--

	.PSECT	SATSUT12,RD,WRT,EXE,LONG
;*******************************************************
;	DATA AREA
;*******************************************************
SSLOGNAM: STRING I,<SYSTST$ABORT>	; LOGICAL NAME TO USE
TRNLEN:	.LONG	0
TRNBUFF: STRING	O,30			; BUFFER FOR EQUIV STRING
;
;
;
;
	.LIST	MEB
	.ENTRY	SATSUT12,0		; MAIN ENTRY
	$TRNLOG_S SSLOGNAM,TRNLEN,TRNBUFF,,,#5 ; SEARCH GROUP TABLE ONLY
	BLBC	R0,20$			; ERROR?
	CMPL	R0,#SS$_NOTRAN		; CANT HANDLE THIS CASE, EXIT
	BEQL	20$
	CMPB	TRNBUFF+8,#^A/Y/	; UPPER CASE Y?
	BEQL	10$
	CMPB	TRNBUFF+8,#^A/y/	; lower case y
	BNEQ	20$			; BRANCH IF NOT A 'Y'
10$:
	MOVL	#^X10000003,R2		; YES, Y=>ABORT. NON PRINT MSG CODE
	BRB	30$			;  WITH SEVERITY = I  (INFORMATION)
20$:
	MOVL	#^X10000001,R2		; NO ABORT. RETURN SUCCESS
30$:
	$EXIT_S R2			; EXIT WITH STATUS
;
	.END	SATSUT12
