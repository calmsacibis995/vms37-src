;	Version 'V03-000'
;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************
;
;++
; MACRO TO GENERATE A OFFSET LIST FOR A DATA STRUCTURE
;
;	IT IS USEFUL FOR INPUT ARGUMENT LISTS POSITIVELY INDEXED FROM AP, AND
;	WORK AREAS ALLOCATED IN CALL STACK AND NEGATIVELY INDEXED FROM FP.
;
; CALL:	$OFFSET	INITIAL,DIRECTION,<<LAB1,[SIZE]>,...,<LABN,[SIZE]>>
;
; WHERE:	INITIAL IS A REQUIRED VALUE FOR THE INTIAL INDEX WHEN
;		ORIGINATING A DATA STRUCTURE DEFINITION.  IT IS NORMALLY
;		(+) 4 FOR ARGUMENT LISTS AND 0 FOR WORK AREAS.
;
;		DIRECTION IS A KEYWORD THAT MUST BE:
;			POSITIVE - FOR STRUCTURES GROWING UP IN MEMORY
;			NEGATIVE - FOR STRUCTURES GROWING DOWN IN MEMORY
;			OR BLANK, IN WHICH CASE "POSITIVE" IS ASSUMED.
;
;		THE LABEL, SIZE LIST IS THE SYMBOLIC NAME FOR THE LOCATION
;		AND THE OPTIONAL SIZE OF THE ELEMENT.  IF BLANK, SIZE IS
;		ASSUMED TO BE 4 ( ONE LONGWORD ).
;
;	TO PERMIT THE DEFINITION OF AN INDEFINITLY LARGE NUMBER OF LABELS,
;	THE MACRO MAY BE CONTINUED.  IN THIS CASE THE "INITIAL" AND
;	"DIRECTION" ARGUMENTS MUST BE BLANK.
;--
	.MACRO	$OFFSET INITVALUE,DIRECTION,SYMLST
	.SAVE
	.PSECT $ABS$ ABS
	.IF  B,INITVALUE
	.=SAVABS...
	.IF NB,DIRECTION
	.ERROR	; DIRECTION MUST BE BLANK WHEN CONTINUING;
	.MEXIT
	.ENDC
	.IFF
	DIR...=1
	.=INITVALUE
	.IF NB,DIRECTION
	.IF IDN	<DIRECTION>,<POSITIVE>
	.IFF
	.IF IDN <DIRECTION>,<NEGATIVE>
	DIR...=-1
	.IFF
	.ERROR	; "DIRECTION" MUST BE "POSITIVE","NEGATIVE", OR BLANK;
	.ENDC
	.ENDC
	.ENDC
	.ENDC
	.IRP SYM,<SYMLST>
	$OFFST1 SYM
	.ENDR
	SAVABS...=.
	.RESTORE
	.ENDM $OFFSET

	.MACRO $OFFST1 SYM,SIZ=4
	.IF	LT,SIZ
	.ERROR			;***** SIZ PARAMETER NEGATIVE *****;
	.ENDC
	.IF	LT,DIR...
	.BLKB	-SIZ
	.ENDC
	.IF NB,SYM
	.LIST	MEB
SYM:
	.NLIST	MEB
	.ENDC
	.IF	GT,DIR...
	.BLKB	SIZ
	.ENDC
	.ENDM $OFFST1
