;	Version 'V03-000'
;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************


;
; ACCOUNTING AND TERMINATION MESSAGE FORMAT
; THIS IS THE STRUCTURE OF THE MESSAGE SENT TO THE TERMINATION MAILBOX
; AND TO THE JOB CONTROLLER.
;
	$STRUCT	ACC

	F MSGTYP,W		; MESSAGE TYPE CODE
	F MSGSIZ,W		; LENGTH OF DATA MESSAGE (VALID ONLY IN ACCLOG)
	F FINALSTS,L		; FINAL EXIT STATUS
	F PID,L			; PROCESS ID
	F JOBID,L		; JOB IDENTIFICATION (VALID ONLY IN ACCLOG)
	F TERMTIME,Q		; TERMINATION TIME (100NS UNITS)
	F ACCOUNT,T,8		; ACCOUNT NAME STRING (BLANK FILLED)
	F USERNAME,T,12		; USER NAME STRING (BLANK FILLED)
	M	1		; END OF FIXED AREA
	F CPUTIM,L		; CPUTIM IN 10MS UNITS
	M	2		; MARK START PRINT JOB VARIATION
	F PAGEFLTS,L		; TOTAL PAGE FAULTS
	F PGFLPEAK,L		; PEAK PAGING FILE USAGE
	F WSPEAK,L		; PEAK WORKING SET SIZE
	F BIOCNT,L		; COUNT OF BUFFERED I/O OPERATIONS
	F DIOCNT,L		; COUNT OF DIRECT I/O OPERATIONS
	F VOLUMES,L		; COUNT OF VOLUMES MOUNTED
	F LOGIN,Q		; LOGIN TIME (100NS UNITS)
	F OWNER,L		; PID OF SUBPROCESS OWNER
	L TERMLEN		; TERMINATION MESSAGE LENGTH
				; AND ACCOUNTING RECORD FOR NON BATCH JOBS
				; END OF TERMINATION MESSAGE
	F JOB_NAME,T,8		; JOB NAME (BLANK FILLED)
	F JOB_QUE,T,16		; QUEUE NAME (.ASCIC)
	L JOB_LEN		; LENGTH OF BATCH JOB ACCOUNTING RECORD

	P	2		; POINT AT PRINT JOB VARIABLE AREA
	F PAGCNT,L		; SYMBIONT PAGE COUNT
	F QIOCNT,L		; SYMBIONT QIO COUNT
	F GETCNT,L		; SYMBIONT GET COUNT
	F QUETIME,Q		; TIME JOB WAS QUEUED
	F PRT_NAME,T,8		; NAME OF PRINT JOB
	F PRT_QUE,T,12		; NAME OF PRINT QUEUE
	L PRT_LEN		; LENGTH OF PRINT ACCOUNTING RECORD
 
;
; DEFINE USER ACCOUNTING MESSAGE DATA AREA
;
	P	1		; POINT AT START OF MESSAGE DEPENDENT AREA
	F USER_DATA,T,132	; ALLOW UP TO 132 BYTES OF USER DATA
	L INS_LEN		; LENGTH OF INSERT MESSAGE
;
; ASSIGN RECORD TYPE CODES FOR RECORDS IN THE ACCOUNT LOG FILE
;
 
	K	<ACC,$K_,1,1		; PROCESS ACCOUNTING RECORDS
		PRCTRM			; JOB TERMINATION
		BATTRM			; BATCH JOB TERMINATION
		INTTRM			; INTERACTIVE JOB TERMINATION
		LOGTRM			; LOGIN FAILURE PROCESS TERMINATION
		>
 
	K	<ACC,$K_,16,1		; MISC ACCOUNTING RECORDS
		PRTJOB			; PRINT JOB ACCOUNTING
		INSMSG			; INSERTED MESSAGE
		>
 
;
; DEFINE ACCOUNTING MANAGER MESSAGE CODES
;
 
 
	K	<ACC,$K_,1,1		;
		INSMESG			; INSERT MESSAGE INTO ACCOUNTING FILE
		NEWFILE			; CREATE A NEW ACCOUNT FILE
		ENABACC			; ENABLE ACCOUNTING
		DISAACC			; DISABLE ACCOUNTING
		ENABSEL			; ENABLE SELECTIVE ACCOUNTING
		DISASEL			; DISABLE SELECTIVE ACCOUNTING
		>
 
	E

