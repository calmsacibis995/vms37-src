	.TITLE	USSTEST
	.IDENT	'V02-000'
;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1980                                                      *
;*  BY DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.			    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED  *
;*  ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE  *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER  *
;*  COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY  *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY  *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE  *
;*  AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT  *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS  *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;*									    *
;****************************************************************************
;
;
; Facility: Example of User Written System Services
;++
; Abstract:
;	This module contains an example of a program that invokes a sample
;	user-written system service that is contained in a privileged 
;	shareable library.  The module USSDISP contains the sample service
;	and associated dispatching code being invoked by this simple test
;	program.
;--
; Link Command File:
; 
;	$ !
;	$ !	Link Command file for USSTEST
;	$ !
;	$ LINK USSTEST/MAP/FULL,SYS$INPUT/OPTIONS
;	!
;	!	Options file for USSTEST
;		USS.EXE/SHARE
;
;--
BUF:	.LONG	0			; Location to receive TODR contents
	.PAGE
	.SBTTL	Sample invocation of user written system service
;++
; Functional Description:
;	This routine shows an invocation of the example user system service that
;	will read the contents of the time of day register.
;
;	As can be seen by this example, the privileged nature of the code used
;	to implement the reading of the TODR is not visible to the caller. 
;	For coding convenience and better maintainability, the code can be
;	generated by macros patterned on the standard VMS system service macros.
;
;--


	.ENTRY	USSTEST,^M<>		; Entry mask and definition
	PUSHAB	BUF			; Build argument list - set address for
					;  return value
	CALLS	#1,G^USER_GET_TODR	; Invoke routine in privileged library
					;  to get value from Time-of-day register
	RET				;

	.END	USSTEST			;

