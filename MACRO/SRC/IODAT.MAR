	.TITLE	MAC$IODAT
	.IDENT	'V03-000'

;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************
;

;++
; FACILITY:	VAX MACRO ASSEMBLER OBJECT LIBRARY
;
; ABSTRACT:
;
; The VAX-11 MACRO assembler translates MACRO-32 source code into object
; modules for input to the VAX-11 LINKER.
;
; ENVIRONMENT:	USER MODE
;
; AUTHOR: Benn Schreiber, CREATION DATE: 21-AUG-78
;
; MODIFIED BY:
;
;	V02.09	MTR0001		Mike Rhodes	 9-Nov-1981
;		Modify the use of the default system library file name.
;
;	V02.08	CNH0039		Chris Hume	 7-Oct-1980
;		Closed off a few remaining object record length checking
;		errors.  (OHDOUT.MAR 02.02, P2ACT1.MAR 02.09)
;
;	V01.07	RN0029		R. Newland	 5-Feb-1980
;		Use OFP (output file parse) in file-options to
;		form object and listing file specifications.
;
;	V01.06	RN0011		R. Newland	11-Sep-1979
;		New librarian support
;
;--

	.SBTTL	DECLARATIONS
;
; INCLUDE FILES:
;

;
; MACROS:
;

	$MAC_GENVALDEF		;DEFINE VAX-11 MACRO GENERAL SYMBOLS
	$MAC_MLFDEF		; Define MLF offsets

;
; EQUATED SYMBOLS:
;

WARN_LIMIT = 52.		; Number of characters remaining in the object
				; record at which the record must be output.

;
; OWN STORAGE:
;

	.PSECT	MAC$IODAT_DATA,NOEXE,LONG

MAC$TERM_FAB::				;FAB FOR TERMINAL OUTPUT
	$FAB	FNM=<SYS$ERROR:>,-
		FAC=<PUT>,-
		RAT=<CR>

MAC$TERM_RAB::				;RAB FOR TERMINAL OUTPUT
	$RAB	FAB=MAC$TERM_FAB

MAC$INPUT_RAB::				;RAB FOR READING INPUT FILE
	$RAB	UBF=MAC$AB_LINEBF,-
		USZ=INP$K_BUFSIZ,-
		ROP=<RAH>,-
		MBC=20,-
		MBF=20

MAC$INPUT_XAB::				;XAB TO GET INPUT CREATION DATE
	$XABDAT

MAC$INPUT_RLFNM::
	$NAM	-			;RELATED FILE NAM BLOCK FOR DEFAULTING
		RSA=MAC$INP_NAM_BUF,-
		ESA=MAC$INP_NAM_BUF,-
		ESS=NAM$C_MAXRSS

MAC$INP_NAM_BUF::
	.BLKB	NAM$C_MAXRSS

MAC$FINPT_RLFNM::			;RELATED FILE NAM BLOCK FOR DEFAULTING
					;(THIS IS THE RESULT OF FIRST SOURCE FILE)
	$NAM	-
		RSA=MAC$FIN_NAM_BUF,-
		ESA=MAC$FIN_NAM_BUF,-
		ESS=NAM$C_MAXRSS

MAC$FIN_NAM_BUF::
	.BLKB	NAM$C_MAXRSS

	.ALIGN	LONG

MAC$OBJECT_FAB::			;FAB FOR OBJECT FILE
	$FAB	DNM=<.OBJ>,FAC=<PUT>,-
		FOP=<TEF,OFP>,-		; TRUNCATE TO EOF
		DEQ=20,-
		NAM=MAC$OBJECT_NAM
MAC$OBJECT_RAB::			;RAB FOR WRITING OBJECT FILE
	$RAB	RBF=MAC$AB_OBJBUF,-
		ROP=<WBH>,-
		RSZ=OBJ$K_BUFSIZ,-
		FAB=MAC$OBJECT_FAB,-
		MBC=20,-
		MBF=20
MAC$OBJECT_NAM::			;NAM BLOCK FOR OBJECT FILE
	$NAM	-
		RLF=MAC$FINPT_RLFNM	;RELATED FILENAME BLOCK (FIRST INPUT FILE)

MAC$LIST_FAB::				;FAB FOR WRITING LISTING FILE
	$FAB	DNM=<.LIS>,FAC=<PUT>,-
		RAT=<CR>,-
		FOP=<TEF,OFP>,-		; TRUNCATE TO END OF FILE
		DEQ=80,-		;DEFAULT EXTEND QUANTITY
		NAM=MAC$LIST_NAM
MAC$LIST_RAB::
	$RAB	RBF=MAC$AB_LST_END,-
		FAB=MAC$LIST_FAB,-
		ROP=<WBH>,-
		MBC=20,-
		MBF=20
MAC$LIST_NAM::				;NAM BLOCK FOR LISTING FILE
	$NAM	-
		RLF=MAC$FINPT_RLFNM	;RELATED FILENAME BLOCK
MAC$SYSLIB_MLF::
	.BLKB	<MLF$K_BLKSIZ-NAM$C_BLN-MLF$K_RSFNLN>
	$NAM			; NAM block for system library
	.BLKB	MLF$K_RSFNLN
;
	.ALIGN	LONG
;
MAC$SYSLIB_FNM::			; System library file name descriptor
	.ASCID	/STARLET/
;
MAC$SYSLIB_DFN::			; Default Syatem library file name desc
	.ASCID	/SYS$LIBRARY:.MLB/
;
MAC$MLB_DEFNAM::			; Default name string for library files
	.ASCID	/.MLB/
;
	.ALIGN	LONG

;
; OUTPUT BUFFERS
;
MAC$AB_OBJBUF::
	.BLKB	OBJ$K_BUFSIZ-WARN_LIMIT	;BUFFER FOR WRITING OBJECT FILE
MAC$AB_OBJWRN::
	.BLKB	WARN_LIMIT		;WARNING LIMIT
	.BLKB	2			;PADDING

	.END
