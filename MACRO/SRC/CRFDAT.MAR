	.TITLE	MAC$CRFDAT	CROSS REFERENCE DATA BASE
	.IDENT	'V03-000'

;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************
;

;++
; FACILITY:	VAX MACRO ASSEMBLER OBJECT LIBRARY
;
; ABSTRACT:
;
; The VAX-11 MACRO assembler translates MACRO-32 source code into object
; modules for input to the VAX-11 LINKER.
;
; ENVIRONMENT:	USER MODE
;
; AUTHOR: Benn Schreiber, CREATION DATE: 25-AUG-78
;
; MODIFIED BY:
;
;	V01.05	RN0024		R. Newland	13-Dec-1979
;		New cref control macros
;
;	V01.04	RN0008		R. Newland	31-Aug-1979
;		31 character symbols
;
;--

	.SBTTL	DECLARATIONS

;
; MACROS
;
	$MAC_SYMBLKDEF			;DEFINE SYMBOL BLOCK OFFSETS
					;AND FLAGS

	.SBTTL	DATA BASE FOR SYMBOL CROSS REFERENCE

;
; FIELD DESCRIPTORS
;

	.PSECT	MAC$RO_DATA,NOWRT,NOEXE,GBL,LONG

SYMBOLFIELD::				; Symbol name field
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!15AC>,-		;FAO CONTROL STRING
	FIELD_WIDTH=15,-		;FIELD WIDTH
	SET_CLEAR=SET

	$CRFFIELDEND			;END OF SYMBOL FIELD

SYMBOLFIELD_31::			;SYMBOL NAME FIELD FOR 31 CHAR SYMBOLS
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!31AC>,-		;FAO CONTROL STRING
	FIELD_WIDTH=31,-		;FIELD WIDTH
	SET_CLEAR=SET

	$CRFFIELDEND			;END OF SYMBOL FIELD

ASSIGNFIELD:				;SEPARATE SYMBOL NAME FROM VALUE
					;WITH SPACE OR EQUAL SIGN
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=< >,-		;USE THIS FIELD IF NOT ASSIGN
	FIELD_WIDTH=1,-
	SET_CLEAR=SET

	$CRFFIELD	-		;IF SYMBOL CREATED BY ASSIGNMENT
	BIT_MASK=SYM$M_ASN,-		;CHECK THIS BIT PLEASE
	FAO_STRING=<=>,-		;OUTPUT AN EQUAL SIGN
	FIELD_WIDTH=1,-
	SET_CLEAR=SET

	$CRFFIELDEND

VALUEFIELD:				;SYMBOL VALUE FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!XL>,-		;FAO CONTROL STRING
	FIELD_WIDTH=8,-			;OUTPUT VALUE IN 8 DIGITS
	SET_CLEAR=SET

	$CRFFIELDEND

VALFLGFIELD:				;VALUE FLAGS FIELD 
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!3* >,-		;JUST SKIP SOME SPACES
	FIELD_WIDTH=3,-			;IF NONE OTHERS FIT
	SET_CLEAR=SET
	$CRFFIELD	-
	BIT_MASK=SYM$M_ABS,-		;IF SYMBOL IS NOT ABS (RELOC)
	FAO_STRING=<-R >,-		;THEN SAY SO
	FIELD_WIDTH=3,-
	SET_CLEAR=CLEAR
	$CRFFIELD	-
	BIT_MASK=SYM$M_DEF,-		;IF SYMBOL NOT DEFINED
	FAO_STRING=<-X >,-
	FIELD_WIDTH=3,-
	SET_CLEAR=CLEAR
	$CRFFIELD	-
	BIT_MASK=SYM$M_ABS!SYM$M_DEF,-
	FAO_STRING=<-XR>,-
	FIELD_WIDTH=3,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

REFLAGFIELD:				;REFERENCE FLAGS
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!2* >,-		;JUST SKIP SPACES
	FIELD_WIDTH=2,-
	SET_CLEAR=SET

	$CRFFIELD	-		;USE THIS IF WRITE REFERENCE
	BIT_MASK=1,-
	FAO_STRING=<#->,-
	FIELD_WIDTH=2,-
	SET_CLEAR=SET

	$CRFFIELDEND

REFERENCER:				;REFERENCER (LINE/PAGE)
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!12AC>,-		;COUNTED ASCII STRING
	FIELD_WIDTH=14,-		;WITH 2 SPACES
	SET_CLEAR=SET

	$CRFFIELDEND
;
; NOW THE CROSS-REFERENCE CONTROL TABLE
;

	.PSECT	MAC$RW_DATA,NOEXE,LONG

MAC$AL_CRFSYCTB::			;CONTROL TABLE FOR SYMBOL CREF
	$CRFCTLTABLE	-		; Control table for symbol cref
		OUTPUT=MAC$CRF_OUTPUT,-	; Output routine
		ERROR=MAC$CRF_ERROR,-	; Error routine
		KEYTYPE=ASCIC,-		; Key type is ASCIC
		KEY1TABLE=SYMBOLFIELD,-	;SYMBOL NAME
		KEY2TABLE=ASSIGNFIELD,-	;'=' IF ASSIGNMENT STATEMENT
		VAL1TABLE=VALUEFIELD,-	;SYMBOL VALUE
		VAL2TABLE=VALFLGFIELD,-	;SYMBOL VALUE FLAGS (NYI)
		REF1TABLE=REFLAGFIELD,-	;SYMBOL REFERENCER FLAGS
		REF2TABLE=REFERENCER	;SYMBOL REFERENCER NAME (LINE/PAGE)

	.SBTTL	DATA BASE FOR MACRO CROSS REFERENCE

;
; FIELD DESCRIPTORS
;
	.PSECT	MAC$RO_DATA,NOWRT,NOEXE,GBL,LONG


MACROFIELD::				; Macro name field
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!15AC>,-
	FIELD_WIDTH=15,-
	SET_CLEAR=SET

	$CRFFIELDEND			;END OF MACRO NAME FIELD

MACROFIELD_31::				;MACRO NAME FIELD FOR 31 CHAR MACROS
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!31AC>,-
	FIELD_WIDTH=31,-
	SET_CLEAR=SET

	$CRFFIELDEND			;END OF MACRO NAME FIELD

DELFIELD:				;MACRO DELETED FLAG FIELD
	$CRFFIELD	-
	BIT_MASK=0,-			;NYI
	FAO_STRING=<   >,-
	FIELD_WIDTH=3,-
	SET_CLEAR=SET

	$CRFFIELDEND

SIZINPAGESFIELD:			;STORAGE USED FOR MACRO
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!SL>,-
	FIELD_WIDTH=8,-
	SET_CLEAR=SET

	$CRFFIELDEND

SIZFLGFIELD:				;FLAGS FOR SIZE FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<   >,-
	FIELD_WIDTH=3,-
	SET_CLEAR=SET

	$CRFFIELDEND

MCREFLGFIELD:				;MACRO REFERENCER LINE/PAGE
					;FLAGS
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<   >,-
	FIELD_WIDTH=3,-
	SET_CLEAR=SET

	$CRFFIELDEND

MCREFFIELD:				;MACRO REFERENCER
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!12AC>,-		;COUNTED ASCII STRING
	FIELD_WIDTH=14,-
	SET_CLEAR=SET

	$CRFFIELDEND

;
; THE CROSS-REFERENCE CONTROL TABLE FOR MACRO CROSS-REFERNCE
;
	.PSECT	MAC$RW_DATA,NOEXE,LONG

MAC$AL_CRFMCCTB::
	$CRFCTLTABLE	-
		OUTPUT=MAC$CRF_OUTPUT,-	; Output routine
		ERROR=MAC$CRF_ERROR,-	; Error routine
		KEYTYPE=ASCIC,-		; Key type is ASCIC
		KEY1TABLE=MACROFIELD,-	 ;MACRO NAME
		KEY2TABLE=DELFIELD,-	 ;FLAG IF DELETED OR NOT
		VAL1TABLE=SIZINPAGESFIELD,- ;SIZE TO DEFINE MACRO
		VAL2TABLE=SIZFLGFIELD,-	 ;SIZE FLAGS
		REF1TABLE=MCREFLGFIELD,- ;REFERENCER FLAGS
		REF2TABLE=MCREFFIELD	 ;REFERENCER LINE/PAGE

	.SBTTL	DATA BASE FOR OPCODE CROSS REFERENCE

;
; FIELD DESCRIPTORS
;
	.PSECT	MAC$RO_DATA,NOWRT,NOEXE,GBL,LONG

OPCODEFIELD:				;OPCODE NAME FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!15AC>,-
	FIELD_WIDTH=15,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

OPFLGFIELD:				;OPCODE FLAGS FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

OPVALFIELD:				;OPCODE VALUE FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!4XW>,-
	FIELD_WIDTH=5,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

OPVALFLGFIELD:				;OPCODE VALUE FLAGS FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!5* >,-
	FIELD_WIDTH=5,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

OPREFLAGFIELD:				;REFERENCER FLAG FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

OPREFFIELD:				;REFERENCER FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!12AC>,-
	FIELD_WIDTH=14,-
	SET_CLEAR=CLEAR

	$CRFFIELDEND

;
; THE CROSS-REFERENCE CONTROL TABLE FOR OPCODE CROSS REFERENCE
;
	.PSECT	MAC$RW_DATA,NOEXE,LONG

MAC$AL_CRFOPCTB::
	$CRFCTLTABLE	-
		OUTPUT=MAC$CRF_OUTPUT,-	; Output routine
		ERROR=MAC$CRF_ERROR,-	; Error routine
		KEYTYPE=ASCIC,-		; Key type is ASCIC
		KEY1TABLE=OPCODEFIELD,-	 ;OPCDOE NAME
		KEY2TABLE=OPFLGFIELD,-	 ;OPCODE FLAGS
		VAL1TABLE=OPVALFIELD,-	 ;OPCODE VALUE
		VAL2TABLE=OPVALFLGFIELD,-;OPCODE VALUE FLAGS
		REF1TABLE=OPREFLAGFIELD,-;REFERENCER FLAGS
		REF2TABLE=OPREFFIELD	 ;REFERENCER

	.SBTTL	DATA BASE FOR DIRECTIVE CROSS REFERENCE

;
; FIELD DESCRIPTORS
;
	.PSECT	MAC$RO_DATA,NOWRT,NOEXE,GBL,LONG

DIRFIELD:				;DIRECTIVE NAME FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!15AC>,-
	FIELD_WIDTH=15,-
	SET_CLEAR=SET

	$CRFFIELDEND

DIRFLGFIELD:				;DIRECTIVE FLAGS FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=SET

	$CRFFIELDEND

DIRVALFIELD:				;DIRECTIVE VALUE FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=SET

	$CRFFIELDEND

DIRVALFLGFIELD:				;DIRECTIVE VALUE FLAGS
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=SET

	$CRFFIELDEND

DIREFLAGFIELD:				;REFERENCER FLAG FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=SET

	$CRFFIELDEND

DIRREFFIELD:				;REFERENCER FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!12AC>,-
	FIELD_WIDTH=14,-
	SET_CLEAR=SET

	$CRFFIELDEND

;
; THE CROSS-REFERENCE CONTROL TABLE FOR DIRECTIVE CROSS REFERENCE
;
	.PSECT	MAC$RW_DATA,NOEXE,LONG

MAC$AL_CRFDRCTB::
	$CRFCTLTABLE	-
		OUTPUT=MAC$CRF_OUTPUT,-	; Output routine
		ERROR=MAC$CRF_ERROR,-	; Error routine
		KEYTYPE=ASCIC,-		; Key type is ASCIC
		KEY1TABLE=DIRFIELD,-	 ;DIRECTIVE NAME
		KEY2TABLE=DIRFLGFIELD,-	 ;DIRECTIVE FLAGS
		VAL1TABLE=DIRVALFIELD,-	 ;DIRECTIVE VALUE
		VAL2TABLE=DIRVALFLGFIELD,- ;DIRECTIVE VALUE FLAGS
		REF1TABLE=DIREFLAGFIELD,- ;REFERENCER FLAGS
		REF2TABLE=DIRREFFIELD	 ;REFERENCER

	.SBTTL	DATA BASE FOR REGISTER CROSS REFERENCE

;
; FIELD DESCRIPTORS
;
	.PSECT	MAC$RO_DATA,NOWRT,NOEXE,GBL,LONG

REGFIELD:				;REGISTER NAME FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!AC!3* >,-
	FIELD_WIDTH=10,-
	SET_CLEAR=SET

	$CRFFIELDEND

REGFLGFIELD:				;REGISTER FLAG FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<>,-
	FIELD_WIDTH=0,-
	SET_CLEAR=SET

	$CRFFIELDEND

REGVALFIELD:				;REGISTER VALUE FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!10SL>,-
	FIELD_WIDTH=14,-
	SET_CLEAR=SET

	$CRFFIELDEND

REGVALFLGFIELD:				;REGISTER VALUE FLAGS FIELD
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!5* >,-
	FIELD_WIDTH=5,-
	SET_CLEAR=SET

	$CRFFIELDEND

REGREFLAGFIELD:				;REGISTER REFERENCER FLAGS
	$CRFFIELD	-		;USE THIS FORMAT IF NOT WRITE REF
	BIT_MASK=0,-
	FAO_STRING=<!2* >,-
	FIELD_WIDTH=2,-
	SET_CLEAR=SET

	$CRFFIELD	-		;WRITE REFERENCE
	BIT_MASK=1,-
	FAO_STRING=<#->,-
	FIELD_WIDTH=2,-
	SET_CLEAR=SET

	$CRFFIELDEND

REGREFFIELD:				;REGISTER REFERENCER
	$CRFFIELD	-
	BIT_MASK=0,-
	FAO_STRING=<!12AC>,-
	FIELD_WIDTH=14,-
	SET_CLEAR=SET

	$CRFFIELDEND

;
; THE CROSS-REFERENCE CONTROL TABLE FOR REGISTERS CROSS REFERENCE
;
	.PSECT	MAC$RW_DATA,NOEXE,LONG

MAC$AL_CRFRGCTB::
	$CRFCTLTABLE	-
		OUTPUT=MAC$CRF_OUTPUT,-	; Output routine
		ERROR=MAC$CRF_ERROR,-	; Error routine
		KEYTYPE=ASCIC,-		; Key type is ASCIC
		KEY1TABLE=REGFIELD,-	 ;REGISTER NAME
		KEY2TABLE=REGFLGFIELD,-	 ;REGISTER FLAGS
		VAL1TABLE=REGVALFIELD,-	 ;REGISTER VALUE
		VAL2TABLE=REGVALFLGFIELD,- ;REGISTER VALUE FLAGS
		REF1TABLE=REGREFLAGFIELD,- ;REFERENCER FLAGS
		REF2TABLE=REGREFFIELD	 ;REFERENCER

	.END
