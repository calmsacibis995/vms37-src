; 
; ERROR LOG FORMAT PROGRAM OUTPUT MESSAGES 
;
;	Version 'V03-000'
;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************
; 
;		******	CAUTION  ******
;
;	ALL OF THE ERFxxDEF STRUCTURES ASSUME THAT THE HEADER IS
;	EXACTLY FOUR LONGWORD IN LENGTH.  IF THIS FIELD CHANGES,
;	IF EFFECTS ALL OF THE OTHER STRUCTURES. THAT IS TO SAY
;	ALL MESSAGES HAVE TYPE,TIME, AND ERROR SEQUENCE IN THE
;	SAME RELATIVE LOCATIONS.
; 
; ERROR MESSAGE HEADER 
; 
 	$STRUCT	ERF,HDDEF

	F	HD_SID,L 			; SYSTEM ID # 
	F	HD_ENTRY,W 			; ENTRY TYPE 
	S	HD_DCLASS,,B 			; DEVICE CLASS 
	V	<M				;
		HD_TYPE,7			; THE TYPE IS 7 BITS
		HD_INVALD			; THE INVALID FLAG
		>
	S	HD_DTYPE,,B 			; DEVICE TYPE 
	F	HD_TIME,Q 			; TIME IN 64 BIT FORMAT 
	F	HD_ERRSEQ,W 			; NEXT UNIVERSAL ERR SEQ # 
	L	HD_LENGTH			; LENGTH OF HEADER 
	E
 
;
; BUGCHECK ERROR MESSAGE BUFFER FORMAT (SYSTEM AND USER)
;
 
	$STRUCT	ERF,BCDEF		;BUG CHECK ENTRY FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	BC_KSP,L		;KERNEL STACK POINTER
	F	BC_ESP,L		;EXECUTIVE STACK POINTER
	F	BC_SSP,L		;SUPERVISOR STACK POINTER
	F	BC_USP,L		;USER STACK POINTER
	F	BC_ISP,L		;INTERRUPT STACK POINTER
	F	BC_R0,L			;REGISTER R0
	F	BC_R1,L			;REGISTER R1
	F	BC_R2,L			;REGISTER R2
	F	BC_R3,L			;REGISTER R3
	F	BC_R4,L			;REGISTER R4
	F	BC_R5,L			;REGISTER R5
	F	BC_R6,L			;REGISTER R6
	F	BC_R7,L			;REGISTER R7
	F	BC_R8,L			;REGISTER R8
	F	BC_R9,L			;REGISTER R9
	F	BC_R10,L		;REGISTER R10
	F	BC_R11,L		;REGISTER R11
	F	BC_AP,L			;ARGUMENT POINTER
	F	BC_FP,L			;FRAME POINTER
	F	BC_SP,L			;CURRENT STACK POINTER
	F	BC_PC,L			;PROGRAM COUNTER
	F	BC_PSL,L		;PROCESSOR STATUS
	F	BC_CODE,L		;BUGCHECK CODE
	F	BC_PCBSZ,W		;SIZE OF PCB IN BYTES
	L	BC_LENGTH		;SIZE OF FIXED PART OF BUGCHECK MESSAGE
	F	BC_PCB,B		;START OF SOFTWARE PCB
	E				;
 
;
; CRASH-RESTART ERROR MESSAGE BUFFER FORMAT
;
 
	$STRUCT	ERF,CRDEF		;CRASH RESTART RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	CR_KSP,L		;KERNEL STACK POINTER
	F	CR_ESP,L		;EXECUTIVE STACK POINTER
	F	CR_SSP,L		;SUPERVISOR STACK POINTER
	F	CR_USP,L		;USER STACK POINTER
	F	CR_ISP,L		;INTERRUPT STACK POINTER
	F	CR_R0,L			;REGISTER R0
	F	CR_R1,L			;REGISTER R1
	F	CR_R2,L			;REGISTER R2
	F	CR_R3,L			;REGISTER R3
	F	CR_R4,L			;REGISTER R4
	F	CR_R5,L			;REGISTER R5
	F	CR_R6,L			;REGISTER R6
	F	CR_R7,L			;REGISTER R7
	F	CR_R8,L			;REGISTER R8
	F	CR_R9,L			;REGISTER R9
	F	CR_R10,L		;REGISTER R10
	F	CR_R11,L		;REGISTER R11
	F	CR_AP,L			;ARGUMENT POINTER
	F	CR_FP,L			;FRAME POINTER
	F	CR_SP,L			;CURRENT STACK POINTER
	F	CR_PC,L			;PROGRAM COUNTER
	F	CR_PSL,L		;PROCESSOR STATUS
	F	CR_P0BR,L		;PROGRAM REGION BASE REGISTER
	F	CR_P0LR,L		;PROGRAM REGION LIMIT REGISTER
	F	CR_P1BR,L		;CONTROL REGION BASE REGISTER
	F	CR_P1LR,L		;CONTROL REGION LIMIT REGISTER
	F	CR_SBR,L		;SYSTEM BASE REGISTER
	F	CR_SLR,L		;SYSTEM LIMIT REGISTER
	F	CR_PCBB,L		;PROCESS CONTROL BLOCK BASE REGISTER
	F	CR_SCBB,L		;SYSTEM CONTROL BLOCK BASE REGISTER
	F	CR_ASTLVL,L		;AST DELIVERY LEVEL REGISTER
	F	CR_SISR,L		;SOFTWARE INTERRUPT SUMMARY REGISTER
	F	CR_ICCS,L		;INTERVAL TIMER CONTROL STATUS REGISTER
	F	CR_ICR,L		;INTERVAL COUNT REGISTER
	F	CR_TODR,L		;TIME OF DAY REGISTER
	F	CR_ACCS,L		;ACCELERATOR CONTROL REGISTER
	F	CR_SBIFS,L		;SBI FAULT STATUS REGISTER
	F	CR_SBISC,L		;SBI COMPARATOR REGISTER
	F	CR_SBIMT,L		;SBI MAINTENANCE REGISTER
	F	CR_SBIER,L		;SBI ERROR REGISTER
	F	CR_SBITA,L		;SBI TIMEOUT ADDRESS REGISTER
	F	CR_SBIS,L,16		;SBI SILO REGISTER
	F	CR_CODE,L		;BUGCHECK/CRASH CODE
	F	CR_PCBSZ,W		;SIZE OF PCB IN BYTES
	L	CR_LENGTH		;SIZE OF FIXED PART OF BUGCHECK MESSAGE
	E
 
;
; DEVICE ERROR MESSAGE BUFFER FORMAT (ERROR AND TIMEOUT)
;
 
	$STRUCT	ERF,DVDEF		;DEVICE ERROR RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	DV_ERTCNT,B		;REMAINING NUMBER OF ERROR RETRIES
	F	DV_ERTMAX,B		;MAXIMUM NUMBER OF ERROR RETRIES
	F	DV_IOSB,Q		;FINAL I/O STATUS
	F	DV_DEVSTS,W		;FINAL DEVICE STATUS
	F	DV_CLASS,B		;DEVICE CLASS
	F	DV_TYPE,B		;DEVICE TYPE
	F	DV_RQPID,L		;REQUESTER PROCESS ID
	F	DV_BOFF,W		;BYTE OFFSET IN PAGE
	F	DV_BCNT,W		;TRANSFER BYTE COUNT
	F	DV_MEDIA,L		;STARTING MEDIA ADDRESS
	F	DV_UNIT,W		;PHYSICAL UNIT NUMBER
	F	DV_ERRCNT,W		;UNIT ERROR COUNT
	F	DV_OPCNT,L		;UNIT OPERATION COUNT
	F	DV_OWNUIC,L		;VOLUME OWNER UIC
	F	DV_CHAR,L		;DEVICE CHARACTERISTICS
	F	DV_SLAVE,B		;SLAVE CONTROLLER NUMBER
	F	,B,1			;SPARE UNUSED BYTES
	F	DV_FUNC,W		;I/O FUNCTION VALUE
	F	DV_NAME,T,16		;DEVICE NAME
	F	DV_REGSAV,L		;START OF REGISTER SAVE AREA
	E
 
;
; TIME STAMP MSG FORMAT
;
 
	$STRUCT	ERF,TSDEF		;TIME STAMP RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	L	TS_LENGTH		;LENGTH OF TIME STAMP MSG
	E
 
;
; SYSTEM SERVICE MESSAGE
;
;	NOTE:	SYSTEM SERVICE MESSAGE COVERS:
;
;		1) THE MESSAGES FROM THE SERVICE
;		2) OPERATOR MESSAGES
;		3) NETWORK MESSAGES
;
;	ONLY THE TYPE FIELD IS DIFERENT
;
 
	$STRUCT	ERF,SSDEF		;SYSTEM SERVICE RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	SS_MSGSZ,W		;MESSAGE TEXT SIZE IN BYTES
	L	SS_LENGTH		;LENGTH OF CONSTANT PART
	F	SS_MSGTXT,B		;FIRST BYTE OF MESSAGE TEXT
	E

;
; VOLUME MOUNT/DISMOUNT MESSAGE TYPE
;
 
	$STRUCT	ERF,VMDEF		;VOLUME MOUNT RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	VM_OWNUIC,L		;OWNER UIC OF THE VOLUME
	F	VM_ERRCNT,L		;UNIT ERROR COUNT FROM UCB
	F	VM_OPRCNT,L		;UNIT OPERATION COUNT FROM UCB
	F	VM_UNIT,W		;DEVICE UNIT NUMBER
	F	VM_NAMLNG,B		;LENGTH OF DEVICE GENERIC NAME
	F	VM_NAMTXT,T,15		;DEVICE GENERIC NAME
	F	VM_VOLNUM,W		;VOLUME NUMBER WITHIN SET
	F	VM_NUMSET,W		;NUMBER OF VOLUMES WITHIN SET
	F	VM_LABEL,T,12		;VOLUME LABEL
	E
;
; SYSTEM STARTUP MESSAGE
;
	$STRUCT	ERF,SUDEF		;SYSTEM UP MESSAGE BUFFER
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	SU_DAYTIM,L		;CONTENTS OF TIME OF DAY CLOCK
	L	SU_LENGTH		;LENGTH OF MESSAGE
	E


;
; MACHINE CHECK LOG BUFFER FORMAT
;

	$STRUCT	ERF,MCDEF
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	MC_SUMCOD,B		;SUMMARY CODE
	F	MC_TOPF,B		;TIME OUT PENDING FLAG
	F	MC_OPCODE,B		;OPCODE OF INSTRUCTION CAUSING CHECK
	F	MC_UNUSED,B		;UNUSED
	F	MC_CES,L		;CPU ERROR STATUS
	F	MC_UPC,L		;MICRO-PC AT FAULT TIME
	F	MC_VA,L			;VIRTUAL ADDRESS AT FAULT TIME
	F	MC_D,L			;CPU D REGISTER AT FAULT TIME
	F	MC_TBER0,L		;TRANSLATION BUFFER STATUS REG 0
	F	MC_TBER1,L		;TRANSLATION BUFFER STATUS REG 1
	F	MC_TIMOAD,L		;PHYSICAL ADDRESS CAUSING SBI TIMEOUT
	F	MC_PARITY,L		;CACHE STATUS REGISTER
	F	MC_SBIERR,L		;SBI ERROR REGISTER
	F	MC_PC,L			;PC OF INSTRUCTION CAUSING CHECK
	F	MC_PSL,L		;PSL OF MACHINE AT FAULT TIME
	L	MC_LENGTH		;LENGTH OF MACHINE CHECK FRAME
	E

;
; SOFT ECC DETECTED ERRORS AND SBI ALERT BUFFER FORMAT
;

	$STRUCT	ERF,SEDEF		;
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	SE_NUMCON,L		;NUMBER OF MEMORY CONTROLLERS
	L	SE_LENGTH		;LENGTH OF FIXED PART OF MSG
	F	SE_TR,L			;ADAPTOR TR NUMBER
	F	SE_A,L			;MEMORY REGISTER A
	F	SE_B,L			;MEMORY REGISTER B
	F	SE_C,L			;MEMORY REGISTER C
	F	SE_PC,L			;PC OF INSTRUCTION AT FAULT TIME
	F	SE_PSL,L		;PSL OF MACHINE AT FAULT TIME
	E

;
; SBI FAULT BUFFER FORMAT AND ASYNCHRONOUS WRITE ERROR FORMAT
;

	$STRUCT	ERF,SBDEF		;SBI FAULT RECORD FORMAT
 
	F	,L,4			;ALLOW SPACE FOR THE HEADER
	F	SB_FAULT,L		;SBI FAULT/STATUS REGISTER
	F	SB_SILCMP,L		;SBI SILO COMPARATOR
	F	SB_MAINT,L		;SBI MAINTENANCE
	F	SB_ERROR,L		;SBI ERROR REG
	F	SB_TIMOUT,L		;SBI TIMEOUT REG
	F	SB_SILO,L,16		;SBI SILO REG
	F	SB_SBIRGS,L,16		;REGISTER A'S ON BUS (OR 0)
	F	SB_PC,L			;PC OF INSTRUCTION AT FAULT TIME
	F	SB_PSL,L		;PSL OF MACHINE AT FAULT TIME
	L	SB_LENGTH		;LENGTH OF SBI ERROR BUFFER
	E				;
