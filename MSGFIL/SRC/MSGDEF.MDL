;-----
;
;	Structure definitions for message sections
;
;-----
;
;	Version 'V03-000'
;
;****************************************************************************
;*									    *
;*  COPYRIGHT (c) 1978, 1980, 1982 BY					    *
;*  DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASSACHUSETTS.		    *
;*  ALL RIGHTS RESERVED.						    *
;* 									    *
;*  THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED   *
;*  ONLY IN  ACCORDANCE WITH  THE  TERMS  OF  SUCH  LICENSE  AND WITH THE   *
;*  INCLUSION OF THE ABOVE COPYRIGHT NOTICE. THIS SOFTWARE OR  ANY  OTHER   *
;*  COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY   *
;*  OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE IS  HEREBY   *
;*  TRANSFERRED.							    *
;* 									    *
;*  THE INFORMATION IN THIS SOFTWARE IS  SUBJECT TO CHANGE WITHOUT NOTICE   *
;*  AND  SHOULD  NOT  BE  CONSTRUED AS  A COMMITMENT BY DIGITAL EQUIPMENT   *
;*  CORPORATION.							    *
;* 									    *
;*  DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE  OR  RELIABILITY OF ITS   *
;*  SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.		    *
;* 									    *
;*									    *
;****************************************************************************


;
;	Define the message section format
;

	$STRUCT	MSC

	F	TYPE,B		; TYPE OF MESSAGE SECTION
	C	<
		MSG		; CONTAINS ACTUAL MESSAGE TEXT
		IND		; CONTAINS FILE SPEC OF MESSAGE FILE
		MAXTYPE		; MAXIMUM ALLOWABLE TYPE CODE
		>
	F	FLAGS,B		; FLAGS
	V	<M
		MAPPED		; TRUE IF FILE HAS BEEN MAPPED (IND ONLY)
		>
	F	SANITY,W	; SANITY CHECK (MUST = MSC$C_SANITY)
	C	SANITY,1234
	F	SIZE,L		; LENGTH OF ENTIRE MESSAGE SECTION (MSG)
	M	1
	F	INDEX_OFF	; OFFSET TO PRIMARY INDEX PORTION
	F	FAC_OFF		; OFFSET TO FACILITY TABLE
	F	TEXT_OFF	; OFFSET TO TEXT PORTION
	F	SUBST_OFF	; OFFSET TO TEXT SUBSTITUTION TABLE
	F	,L,4		; RESERVED
	L	LENGTH		; LENGTH OF FIXED PORTION (MSG)

	P	1		; -- IND TYPE ONLY
	F	INDNAMLEN,B	; LENGTH OF COUNTED STRING
	F	INDNAME,T	; FILE SPEC OF MESSAGE FILE
	E


;
;	Define message section index
;
;	All message indicies are longword aligned and the
;	size is always rounded to the next longword boundary.
;	This is done for additional verification checks.
;

	$STRUCT	MIDX

	C	BKTSIZ,512	; BUCKET SIZE IN BYTES
	F	SIZE,W		; LENGTH OF INDEX IN BYTES
	F	SANITY,B	; SANITY CHECK (MUST = MIDX$C_SANITY)
	C	SANITY,123
	F	,B,5		; UNUSED, ROUND SO BYTES LEFT DIV. BY 8
	L	LENGTH		; LENGTH OF FIXED BUCKET OVERHEAD
	L	ENTRIES		; START OF INDEX ENTRIES
				; EACH IS 8 BYTES,
				; 0-3: MESSAGE CODE
				; 4-7: OFFSET TO MESSAGE RECORD
				;      (IF LOW BIT SET, THEN OFFSET
				;      POINTS TO SUBINDEX RATHER THAN
				;      A MESSAGE RECORD)
	E


;
;	Message definition record in message section
;
;	All message definition records are word aligned and
;	the size is rounded to the next word boundary.  This
;	is done for additional verification checks.
;

	$STRUCT	MREC

	F	SIZE,W		; LENGTH OF MESSAGE DEFINITION RECORD
	F	TYPE,B		; TYPE OF MESSAGE RECORD
	F	FLAGS,B		; FLAGS
	F	LEVEL,B		; MESSAGE DETAIL LEVEL (0-255)
	F	FAOCNT,B	; NUMBER OF FAO ARGUMENTS IN MESSAGE
	F	USERVAL,B	; USER SPECIFIED VALUE
	F	,B		; UNUSED
	F	LANG,B		; LANGUAGE NUMBER
	C	<
		ENGLISH		; ENGLISH LANGUAGE (DEFAULT)
		GERMAN		; GERMAN LANGUAGE
		FRENCH		; FRENCH LANGUAGE
		>
	L	FIXEDLEN	; LENGTH OF FIXED PORTION OF RECORD
	F	IDENTLEN,B	; MESSAGE IDENT STRING LENGTH
	F	IDENT,T		; MESSAGE IDENT STRING
				; MESSAGE TEXT FOLLOWS (ASCIC)
	E


;
;	Define facility name table within section
;

	$STRUCT	MFAC

	F	NUMBER,W	; FACILITY NUMBER
	F	NAMELEN,B	; LENGTH OF FACILITY NAME
	F	NAME,T		; FACILITY NAME (VARIABLE LENGTH)
	E

