;
; Build shared SOS for VAX/VMS
;
EXE$:SOS/-FP/MM/CP/MU,MAP$:SOS/SH/MA/-SP/-CRF=LIB$:SOS/LB:SOSID
LIB$:SOS/LB:SOSDEF:SOSDAT
LIB$:SOS/LB:SOSSTA:SOSINI:INIERR
LIB$:SOS/LB:SOSSW:SOSSWT:TRMDEF:CUSTOM
LIB$:SOS/LB:GIVBIG:GIVDOT:GIVLOC:GIVNAM:GIVSTR:GERROR
RESOBJ$:PIPUTL/LB:GERRM
LIB$:SOS/LB:GETCON
LIB$:SOS/LB:CMDM:CMDK:CMD056:CMDJ
LIB$:SOS/LB:CMDH:SOSHLP
LIB$:SOS/LB:CMDL:SOSLST
LIB$:SOS/LB:CMDN:MODPGS
LIB$:SOS/LB:SOSERR:CMDERR:SOSPER
LIB$:SOS/LB:BUFINI:ENDFIL
LIB$:SOS/LB:DOCAT:SOSCAT:CMDE:CMDW:SAVE:SAVEXX
LIB$:SOS/LB:SOSCLS:SOSPRS
LIB$:SOS/LB:COPTRN:COPERR:COPYFS:COPYA:COPYB
LIB$:SOS/LB:COPYBA:COPYBB:COPYBC:COPYXX:COPYXY:COPYXZ
LIB$:SOS/LB:CMDS:CMDSDO:GETBUF:BFFSR:SRCH3:GETSTR:CMDF
LIB$:SOS/LB:CMDP:CMD012:CMD033:PRTLIN:PRTLN
LIB$:SOS/LB:NEWLIN:CMDA:CHLINE
LIB$:SOS/LB:ALTDEL:ALTECH:ALTEWO:ALTTYP
LIB$:SOS/LB:ALTER:ALTPRT:ALTLST:ALTSHI:ALTINS
LIB$:SOS/LB:CMDI:FLINC:INSERT:INSLIN
LIB$:SOS/LB:CMDR:DELREP:DELLIN
LIB$:SOS/LB:SOSOPN:FINDR:FIND:SHIFTB:DUMP
LIB$:SOS/LB:FINOUT:NXTLIN:GETLIN:SOSREC:SOSEXT
LIB$:SOS/LB:SAVREG:DECIML:MULDIV
LIB$:SOS/LB:SOSGO:SOSCMD:SCAN:RDCMD:SOSTTY:SOSCOM:TXTSTR
LIB$:SOS/LB:GETRNG:GETLNP:GETLN1:GETLN2
LIB$:SOS/LB:PSTRNG:PRVLIN
LIB$:SOS/LB:GETDOT:SETDOT
SYS$LIBRARY:SYSLIB/LB:.GCML:EDDAT:CBTA:DSPAT:C5TA:CAT5
SYS$LIBRARY:SYSLIB/LB:ANSPAD:WATNOD:CONTRL
SYS$LIBRARY:SYSLIB/LB:FINIT:PARSE:ELPARS:PARSDV:PARSFN:PARSDI:PARDI
SYS$LIBRARY:SYSLIB/LB:ASCR50:ASCPPN:PPNASC:.ODCVT
SYS$LIBRARY:SYSLIB/LB:DIFND:DIRFND:UDIREC:DIRECT
SYS$LIBRARY:SYSLIB/LB:OPFNB:RQLCB:ASSLUN:CREATE
SYS$LIBRARY:SYSLIB/LB:DEL:MKDL:RSTFDB:DLFNB:CLOSE
SYS$LIBRARY:SYSLIB/LB:POINT:PNTMRK:XQIOU:RWFSR2
SYS$LIBRARY:SYSLIB/LB:GETSQ:RDWAIT
SYS$LIBRARY:SYSLIB/LB:PGCS:BDBREC:BKRG:RWBLK:RETADR:EOFCHK
SYS$LIBRARY:SYSLIB/LB:XQIOI:WAITI:WATSET
SYS$LIBRARY:SYSLIB/LB:COMMON:SAVR1:MOVREC
SYS$LIBRARY:SYSLIB/LB:ARITH:CKALOC:WTWAIT:PUTSQ
/
TASK=...SOS
PRI=60
UNITS=10
STACK=144
ASG=SY:1:2:3:6:7:8
ASG=TI:4		;CMDLUN - COMMAND INPUT (SYS$INPUT)
ASG=TI:5		;TIOLUN - COMMAND OUTPUT (SYS$OUTPUT)
ASG=LB:9
ASG=CO:10		;TTYLUN - THE REAL TERMINAL IF ANY
			;	- CO: FOR VAX/VMS, TI: FOR RSX
;
; FOR VMS ONLY PATCH MODULE OPFNB 28.0V TO ALLOW NEW STREAM RECORD
; TYPES TO BE OPENED.
;
GBLPAT=SOSID:.OPFNB+1150:6
;
; PATCH LUN FOR GET ERROR MESSAGE MODULE (GERRM)
;
GBLPAT=SOSID:.EOLUN:11	;LUN 9 IN OCTAL
			;SEGMENT = SOSID  - NON OVERLAYED
			;	 = GERMSG - OVERLAYED
GBLDEF=MINBF:3000	;MINIMUM BUFFER SPACE SOS CAN RUN WITH
;EXTSCT=NEWLN1:1004	;FOR OVERLAYED SOS, 516. BYTE "NEWLIN" BUFFER
EXTSCT=DIRSEC:120	;FOR VAX/VMS 80 BYTE DEFAULT DIRECTORY BUFFER
;
; PATCH THE LISTING FILE DEFAULT EXTENSION TO .LIS FOR VAX/VMS
;
GBLPAT=SOSID:LSTEXT:46173
GBLDEF=INITSW:0		;PATCH OUT THE USE OF "SWITCH.INI" IN VAX/VMS
;
; FOR IAS AND RSX 11D THE FOLLOWING GBLDEF MUST BE REMOVED AND
; THE ROUTINE IASINI MUST BE PROVIDED.  IT IS A ROUTINE CALLED VIA
; JSR PC,IASINI AND IS INTENDED TO DO SOMETHING ABOUT ALTMODE ECHOING.
;
GBLDEF=IASINI:0		;SEPARATE IAS/11D TERMINAL INIT ROUTINE NOT INVOKED
;
; ALL SYSTEMS EXCEPT 11M AND 11S DO AUTOMATIC PRINT SPOOLING
; PATCH OUT USE OF .PRINT FOR 11D, IAS, VAX, MPLUS
; (DO NOT DEFINE .PRINT FOR MPLUS FCSFSL).
;
GBLDEF=.PRINT:0
;GBLDEF=EXTEND:0	;DEFINE FOR OVERLAYED SOS, NO MANUAL FILE EXTENSION
;
; BUILD PARAMETERS WHICH MAY BE CHANGED
;
GBLPAT=SOSID:LINPPG:67	;DEFAULT LINES (55.) TO USE FOR LISTING FORMAT
GBLDEF=DFLTBF:24000	;TEXT BUFFER SIZE (OCTAL BYTES), 2000 = 1K BYTES
EXTSCT=AAFSTR:310	;MAXIMUM SIZE OF FIND STRINGS (OCTAL BYTES)
GBLDEF=FSTRGS:310	;SAME SIZE AS AAFSTR PSECT ABOVE
EXTSCT=AAS1ST:310	;MAX SIZE OF STRINGS TO SEARCH FOR IN SUBSTITUTE CMD
GBLDEF=S1STRS:310	;SIZE OF AAS1ST PSECT ABOVE
EXTSCT=AAS2ST:310	;MAX SIZE OF STRINGS TO SUBSTITUTE
GBLDEF=S2STRS:310	;SIZE OF AAS2ST PSECT ABOVE
EXTSCT=AASRCO:310	;MAX SIZE OF CONTENT ADDRESSING STRINGS
GBLDEF=SRCONL:310	;SIZE OF AASRCO PSECT ABOVE
//
